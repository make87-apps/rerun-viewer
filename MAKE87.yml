version: 1
interfaces:
  - name: vector-tcp
    protocol: tcp
    servers:
      - name: socket
        spec:
          string: vector-tcp
        port:
          name: vector-tcp
          protocol: TCP
          target_port: 9000
          publish_mode: Ingress
          is_system_interface: false
          is_dev_interface: false
  - name: rerun-grpc
    protocol: grpc
    servers:
      - name: rerun-grpc-server
        spec:
          string: rerun-grpc
        port:
          name: rerun-grpc
          protocol: TCP
          target_port: 9876
          publish_mode: Ingress
          is_system_interface: false
          is_dev_interface: true
          url_prefix: https://app.rerun.io/version/0.25.1/?url=rerun+https://
          url_suffix: /proxy
        config:
          type: object
          properties:
            memory_limit:
              type: integer
              minimum: 0
              default: 2000000000
            playback_behavior:
              type: string
              enum: [OldestFirst, NewestFirst]
              default: NewestFirst
          required:
            - memory_limit
            - playback_behavior
container_config:
    environment:
        RUST_LOG: info
build:
  build_kit:
    name: rust
dev_build:
  build_kit:
    name: rust
    build_additions:
      ide: vscode_server_rust
      ssh: ssh_server
